<!DOCTYPE html>

<html lang="pt-br">

<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='../static/css/home.css') }}">

</head>

<body>

    <main id="home">

        <header>

            <div class="name_user">

                <h1> {{ user.name }} </h1>

            </div>

            <div class="logout">

                <a href="{{ url_for('main.add_product') }}">
                    <button>
                        <span class="material-symbols-outlined">Add_Card</span>
                    </button>
                </a>

                <a href="{{ url_for('main.search_product') }}">
                    <button>
                        <span class="material-symbols-outlined">Search</span>
                    </button>
                </a>

                <a href="{{ url_for('main.index') }}">
                    <button onclick="return confirm('Deseja fechar sessÃ£o?')">
                        <span class="material-symbols-outlined">logout</span>
                    </button>
                </a>

            </div>

        </header>

        <a href="{{ url_for('main.new_product') }}">
            <button class="btn_fixed">
                <span class="material-symbols-outlined">Add</span>
            </button>
        </a>

        <section class="status">

            <p>Produtos cadastrados: [ {{ total_produtos }} ]</p>
            <p>Vencimento em 20 dias: [ {{ vencem_em_20_dias }} ]</p>
            <p>Vencimento em 10 dias: [ {{ vencem_em_10_dias }} ]</p>
        
        </section>        

    {% if produtos %}
        {% for produto in produtos %}
            <section class="products_box">
                <div class="image">
                    <img src="{{ produto.imagem }}" width="115px" height="100px" alt="Imagem do produto">
                </div>

                <div class="info">
                    <div class="column_one">
                        <p>{{ produto.validade }}</p>
                        <p>
                            {% if produto.dias_restantes < 0 %}
                                <span style="color: red;">{{ produto.dias_restantes | abs }} dias</span>
                            {% elif produto.dias_restantes == 0 %}
                                <span style="color: orange;">Vence hoje</span>
                            {% elif produto.dias_restantes <= 10 %}
                                <span style="color: orange;">{{ produto.dias_restantes }} dias</span>
                            {% elif produto.dias_restantes <= 20 %}
                                <span style="color: #DAA520;">{{ produto.dias_restantes }} dias</span>
                            {% else %}
                                <span style="color: green;">{{ produto.dias_restantes }} dias</span>
                            {% endif %}
                        </p>
                    </div>

                    <div class="column_two">
                        <p>{{ produto.nome }}</p>
                    </div>

                    <div class="column_three">
                        <p>{{ produto.codigo }}</p>
                    </div>
                
                    <div class="btn_s">
                    
                        <form action="#" method="POST" autocomplete="off">
    
                            <button id="btn_edit">
                                <span class="material-symbols-outlined">Edit</span>
                            </button>
    
                        </form>
    
                        <form action="{{ url_for('main.deletar_produto', codigo=produto.codigo) }}" method="POST" onsubmit="return confirm('Tem certeza que deseja excluir este produto?');">
                        
                            <button type="submit" id="btn_delete">
                                <span class="material-symbols-outlined">Delete</span>
                            </button>
                        
                        </form>
                    
                    </div>

                </div>
                
            </section>
        {% endfor %}
    
    {% else %}
        <p style="text-align: center; color: #777; margin-top: 20px;">
            Nenhum produto cadastrado no momento.
        </p>
    {% endif %}

    </main>
        
    <script src="../static/js/index.js"></script>

</body>

</html>